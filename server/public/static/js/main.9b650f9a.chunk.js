(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(187)},125:function(e,t,a){},126:function(e,t,a){},172:function(e,t){},182:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),c=(a(125),a(38)),i=a(39),m=a(43),s=a(40),u=a(44),d=a(233),h=a(223),p=(a(126),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).valueChange=function(e){a.roomName=e.target.value,localStorage.setItem("HE-room-name",e.target.value),console.log(e.target.value)},a.onGameSelected=function(e){a.roomName?a.props.history.push("/room/"+e):alert("\u623f\u95f4\u540d\u79f0\u4e3a\u7a7a\uff01")},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.roomName=localStorage.getItem("HE-room-name")||""}},{key:"render",value:function(){var e=this,t={BlackJack:"21 \u70b9"},a=localStorage.getItem("HE-room-name")||"";return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"\u5ba2\u5385\u5a31\u4e50\u7cfb\u7edf"),r.a.createElement("div",{className:"room-input"},r.a.createElement(d.a,{required:!0,id:"outlined-required",label:"\u623f\u95f4\u540d\u79f0",defaultValue:a,onChange:this.valueChange,margin:"normal",className:"input",variant:"outlined"})),r.a.createElement("div",{className:"game-container"},Object.keys(t).map(function(a){return r.a.createElement(h.a,{variant:"contained",color:"primary",key:a,onClick:function(){return e.onGameSelected(a)}},t[a])})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=a(111),E=a(29),v=a(67),f=a(234),g=window.location.host,b=a(224),k=a(69),w=a(108),N=a.n(w),C=a(227),S=a(225),x=a(222),j=a(226),O=a(63),I=a.n(O),A=a(64),D=a.n(A),R=a(229),L=a(65),B=a.n(L),G=a(228);function H(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -",50,"%)"),justifyContent:"center",alignItems:"center",flexDirection:"column",display:"flex"}}var M=Object(b.a)(function(e){return{paper:{position:"absolute",width:"70vh",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(4),outline:"none"},root:{justifyContent:"center",alignItems:"center"},list:{alignItems:"center",width:"80%"},button:{position:"absolute",right:0,top:0}}});function F(e){var t=e.remote,a=e.open,n=e.back,o=e.connected,l=e.gameName,c=t.name,i=t.players,m=t.maxPlayerNumber,s=M(),u=r.a.useState(H),d=Object(v.a)(u,1)[0];return r.a.createElement(f.a,{open:a},o?r.a.createElement("div",{style:d,className:s.paper},r.a.createElement(G.a,{className:s.button,"aria-label":"Delete",onClick:function(){return n()}},r.a.createElement(B.a,{style:{color:"black"}})),r.a.createElement(k.a,{variant:"h4",id:"modal-title",style:{color:"black",textAlign:"center"}},c),r.a.createElement(N.a,{value:g+"/controller/"+c+"/"+l,size:258,includeMargin:!0}),r.a.createElement("span",null,"\u626b\u7801\u52a0\u5165"),r.a.createElement(k.a,{variant:"h5",id:"modal-title",style:{color:"black",textAlign:"center"}},"Player: ",i.length,"/",m),r.a.createElement(x.a,{className:s.list},function(e){return e.map(function(e){return r.a.createElement(S.a,{key:e.name},r.a.createElement(j.a,{primary:e.name,color:"primary"}),r.a.createElement(C.a,null,e.ready?r.a.createElement(I.a,{color:"primary"}):r.a.createElement(D.a,{color:"error"})))})}(i))):r.a.createElement("div",{style:d,className:s.paper},r.a.createElement("h2",{style:{display:"flex",alignItems:"center",justifyItems:"center"}},r.a.createElement(R.a,{style:{marginRight:"5vh"},color:"secondary"}),"\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668")))}var P=a(66),T=a.n(P),V=a(230),_=a(231),J=a(109),W=a.n(J),U=a(110),q=a.n(U),z=a(113),K=(a(176),z.a.div({enter:{opacity:1},exit:{opacity:0}}),Object(b.a)(function(e){return{card:{height:"25vh"}}}));var Y=function(e){var t=e.suit,a=e.value,n=e.show,o=K(),l=n?"".concat(a,"_of_").concat(t.toLowerCase()):"back";return r.a.createElement("div",null,r.a.createElement("img",{src:"/cards/".concat(l,".svg"),alt:l,className:o.card}))},$=Object(b.a)(function(e){return{container:{display:"flex"},card:{width:"3vh"}}});var Q=function(e){var t=e.cards,a=e.style,n=$();return r.a.createElement("div",{className:n.container,style:a},t.map(function(e,t){var a=e.suit,o=e.value,l=e.show;return r.a.createElement("div",{className:n.card,key:t},r.a.createElement(Y,{value:o,suit:a,show:l}))}))},X=Object(b.a)(function(e){return{container:{width:"19%",padding:3,borderStyle:"solid",borderWidth:3}}});var Z=function(e){var t=e.player,a=t.hand,n=t.name,o=t.money,l=t.handValue,c=t.bet,i=t.state,m=X(),s="#12752b";switch(i){case"\u6b63\u5728\u8981\u724c":s="white";break;case"\u5df2\u7ecf\u4e0b\u6ce8":s="#140587";break;case"\u7206\u724c":case"\u5e84\u5bb6\u83b7\u80dc":s="#a50b0b";break;case"21\u70b9\uff01":case"\u73a9\u5bb6\u83b7\u80dc\uff01":s="#e2df06";break;case"\u5e73\u5c40":s="#42f4e5";break;default:s="#12752b"}return r.a.createElement("div",{className:m.container,style:{borderColor:s}},r.a.createElement(k.a,{variant:"h3",id:"modal-title",style:{color:"white",textAlign:"center"}},n),r.a.createElement(k.a,{variant:"h5",id:"modal-title",style:{color:"white",textAlign:"center"}},0!==l&&"\u624b\u724c\uff1a".concat(l)),r.a.createElement(k.a,{variant:"h6",id:"modal-title",style:{color:"white",textAlign:"center"}},"\u672c\u91d1\uff1a",o," \u4e0b\u6ce8\uff1a",c),r.a.createElement(Q,{cards:a}))},ee=Object(b.a)(function(e){return{container:{display:"flex",position:"float",flexDirection:"column",justifyContent:"space-around",alignItems:"center",height:"100vh",backgroundColor:"#12752b"},dealerContainer:{paddingTop:"5vh",height:"30vh",justifyContent:"center",alignItems:"center",justifyItems:"center",width:"50%",display:"flex",flexDirection:" row"},boardContainer:{flex:2,flexGrow:2,width:"100%"},playerContainer:{width:"100%",height:"40vh",display:"flex",flexDirection:"row",justifyContent:"space-around"}}});var te={BlackJack:function(e){var t=e.state,a=t.gameState,n=ee();return console.log("black jack state",t),r.a.createElement("div",{className:n.container},r.a.createElement("div",{className:n.dealerContainer},r.a.createElement(k.a,{variant:"h3",id:"modal-title",style:{color:"white",marginRight:"20%"}},0!==a.dealValue&&a.dealValue," ",a.dealValue>21&&"\u5e84\u5bb6\u7206\u724c\uff01"," ",21===a.dealValue&&"\u5e84\u5bb6 Black Jack\uff01"),r.a.createElement(Q,{cards:a.dealHand})),r.a.createElement("div",{className:n.boardContainer},r.a.createElement(k.a,{variant:"h3",id:"modal-title",style:{color:"white",textAlign:"center"}},a.promotion),r.a.createElement(k.a,{variant:"h1",id:"modal-title",style:{color:"white",textAlign:"center",margin:"2vh"}},a.countDown>=0&&a.countDown)),r.a.createElement("div",{className:n.playerContainer},a.players.map(function(e){return r.a.createElement(Z,{player:e})})))}},ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(s.a)(t).call(this,e))).toggleFullScreen=function(){a.setState(function(e){return{isFull:!e.isFull}})},a.back=function(){a.props.history.push("/")},a.state={remote:{name:"",players:[],gameState:{},maxPlayerNumber:0,isStarted:!1},isFull:!1,shouldOpenRoomStatusModal:!0,connected:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.game,a=localStorage.getItem("HE-room-name");this.io=new T.a(g),this.io.on("connect",function(){e.io.emit("CLIENT_LOGIN",{type:0,name:a,data:t,token:111}),e.setState({connected:!0}),e.io.on("SERVER_UPDATE",function(t){var a=!t.isStarted;e.setState({remote:t,shouldOpenRoomStatusModal:a}),console.log("Server Update:",t)})}),this.io.on("disconnect",function(){e.setState({connected:!1,shouldOpenRoomStatusModal:!0})})}},{key:"componentWillUnmount",value:function(){this.io.disconnect()}},{key:"render",value:function(){var e=this,t=localStorage.getItem("HE-room-name"),a=this.props.match.params.game,n=te[a];return r.a.createElement(W.a,{enabled:this.state.isFull,onChange:function(t){return e.setState({isFull:t})},onLeave:this.back},r.a.createElement("div",{className:"room-container"},r.a.createElement(V.a,{position:"fixed",color:"primary",style:{justifyContent:"center",height:this.state.isFull?25:50}},r.a.createElement(_.a,null,r.a.createElement(k.a,{variant:"h6",color:"inherit",style:{flex:1}},"".concat(t," - ").concat(a)),r.a.createElement(G.a,{"aria-label":"Full Screen",onClick:this.toggleFullScreen},r.a.createElement(q.a,{style:{color:"white"}})),r.a.createElement(G.a,{"aria-label":"Back",onClick:this.back},r.a.createElement(B.a,{style:{color:"white"}})))),r.a.createElement("div",{className:"room-game"},this.state.remote.isStarted?r.a.createElement(n,{state:this.state.remote}):r.a.createElement(F,{back:this.back,open:this.state.shouldOpenRoomStatusModal,remote:this.state.remote,connected:this.state.connected,gameName:a}))))}}]),t}(r.a.Component),ne=a(219),re=(a(182),a(232)),oe=a(235),le=Object(b.a)(function(e){return{container:{display:"flex",flex:1,width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",backgroundColor:"#ccc",color:"black",height:"100vh"},screen:{flex:1,width:"100%"},actionContainer:{width:"100%"},bet:{width:"100%",height:"30vh",marginBottom:"2vh",display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"row"},buttonGroup:{height:"10vmax",width:"100vw",borderRadius:0},askButtonGroup:{width:"50vw"}}});var ce={BlackJack:function(e){var t=e.state,a=e.send,n=e.name,o=r.a.useState(1),l=Object(v.a)(o,2),c=l[0],i=l[1],m=le(),s=function(){var e=p().money,t=Math.floor(e*(c/100));a({type:"PlayerBet",payload:t})},u=function(){a({type:"PlayerHit"})},d=function(){a({type:"PlayerStand"})},p=function(){return t.players.find(function(e){return e.name===n})},y=function(e,t){i(t)};return r.a.createElement("div",{className:m.container},r.a.createElement("div",{className:m.screen},r.a.createElement("h1",null,n),r.a.createElement("h2",null,"\u672c\u91d1\uff1a",p().money),r.a.createElement("h2",null,"\u4e0b\u6ce8\uff1a",p().bet),r.a.createElement("h4",null,p().state)),r.a.createElement("div",{className:m.actionContainer},"BET"===t.stage&&"\u5df2\u7ecf\u4e0b\u6ce8"!==p().state?function(){var e=p().money,t=Math.floor(e*(c/100));return r.a.createElement("div",null,r.a.createElement("div",{className:m.bet},r.a.createElement("h2",{style:{width:"100%"}},t),r.a.createElement(oe.a,{max:100,min:5,orientation:"vertical",value:c,onChange:y,"aria-labelledby":"\u4e0b\u6ce8"})),r.a.createElement(re.a,{variant:"contained",fullWidth:!0,color:"primary",className:m.buttonGroup},r.a.createElement(h.a,{onClick:s},"\u4e0b\u6ce8")))}():"ASK"===t.stage&&"\u6b63\u5728\u8981\u724c"===p().state?r.a.createElement(re.a,{variant:"contained",fullWidth:!0,color:"primary",className:m.buttonGroup},r.a.createElement(h.a,{onClick:u},"\u8981\u724c"),r.a.createElement(h.a,{onClick:d},"\u7ed3\u675f")):r.a.createElement("h4",null,"\u5f53\u524d\u6ca1\u6709\u53ef\u7528\u64cd\u4f5c")))}},ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(s.a)(t).call(this,e))).generateList=function(e){return e.map(function(e){return r.a.createElement(S.a,{key:e.name},r.a.createElement(j.a,{primary:e.name}),r.a.createElement(C.a,null,e.ready?r.a.createElement(I.a,{color:"primary"}):r.a.createElement(D.a,{color:"error"})))})},a.valueChange=function(e){a.playerName=e.target.value,localStorage.setItem("HE-player-name",e.target.value)},a.onEnterClick=function(){if(a.playerName){var e=a.props.match.params.room;a.io=new T.a(g),a.io.on("connect",function(){a.io.emit("CLIENT_LOGIN",{type:1,name:a.playerName,data:e,token:111}),a.setState({playing:!1,connected:!0}),a.io.on("SERVER_UPDATE",function(e){var t=e.isStarted;a.setState({remote:e,playing:t})})}),a.io.on("disconnect",function(){a.setState({connected:!1,playing:!1})})}else alert("\u73a9\u5bb6\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")},a.onReady=function(){a.io&&a.io.emit("CLIENT_READY")},a.onSendAction=function(e){a.io&&a.io.emit("CLIENT_ACTION",e)},a.renderGame=function(){var e=a.props.match.params.game,t=ce[e];return r.a.createElement(t,{state:a.state.remote.gameState,send:a.onSendAction,name:a.playerName})},a.renderLogin=function(){var e=localStorage.getItem("HE-player-name")||"",t=a.props.match.params,n=t.room,o=t.game;return a.state.connected?r.a.createElement("div",{className:"Controller"},r.a.createElement("div",{className:"player-ready-container"},r.a.createElement("h1",null,"\u51c6\u5907"),r.a.createElement(x.a,{className:"controller-player-list"},a.generateList(a.state.remote.players))),r.a.createElement(h.a,{className:"player-input-button",variant:"contained",color:"primary",onClick:a.onReady},"\u5c31\u7eea")):r.a.createElement("div",{className:"Controller"},r.a.createElement("div",{className:"player-input-container"},r.a.createElement("h1",null,n," : ",o),r.a.createElement("div",{className:"player-input"},r.a.createElement("h2",null,"\u73a9\u5bb6\u540d\u79f0"),r.a.createElement(ne.a,{defaultValue:e,onChange:a.valueChange,className:"input"}))),r.a.createElement(h.a,{className:"player-input-button",variant:"contained",color:"primary",onClick:a.onEnterClick},"\u5f00\u59cb"))},a.state={playing:!1,connected:!1,remote:{name:"",players:[],gameState:{},maxPlayerNumber:0,isStarted:!1}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.playerName=localStorage.getItem("HE-player-name")||""}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.playing?this.renderGame():this.renderLogin())}}]),t}(r.a.Component);l.a.render(r.a.createElement(function(){return r.a.createElement(y.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:p}),r.a.createElement(E.a,{path:"/room/:game",component:ae}),r.a.createElement(E.a,{exact:!0,path:"/controller/:room/:game",component:ie}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.9b650f9a.chunk.js.map